{"version":3,"file":"component---src-pages-admin-index-js-cb97ea232e4dbb86c3d6.js","mappings":"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","sources":["webpack://ashk-aesthetics/./src/components/Admin/Auth/Auth.js","webpack://ashk-aesthetics/./src/components/Admin/Inbox/Preview/Preview.module.scss","webpack://ashk-aesthetics/./src/components/Admin/Inbox/Preview/Preview.js","webpack://ashk-aesthetics/./src/components/Admin/Inbox/Message/Message.module.scss","webpack://ashk-aesthetics/./src/components/Admin/Inbox/Message/Message.js","webpack://ashk-aesthetics/./src/components/Admin/Inbox/Inbox.js","webpack://ashk-aesthetics/./src/pages/admin/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nimport Introduction from '../../Introduction/Introduction';\nimport Form from '../../Complementary/Form/Form';\n\nimport { BACKEND_DOMAIN } from '../../../config/constants';\n\nconst Auth = ({ login }) => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState();\n\n    const onLoginHandler = (values) => {\n        setLoading(true);\n\n        let url = BACKEND_DOMAIN + 'admin/ashkaesthetics';\n        let credentials = { credentials: values };\n\n        axios.post(url, credentials)\n            .then(response => {\n                localStorage.setItem('token', response.data.token);\n                localStorage.setItem('expirationDate', response.data.expirationDate);\n                \n                setLoading(false);\n                setError(null);\n                \n                login();\n            })\n            .catch(err => {\n                setLoading(false);\n                let errorMessage = err.response.data.message;\n\n                setError(errorMessage);\n            });\n    }\n\n    return (\n    \t<React.Fragment>\n            <Introduction \n                main = 'Administrator area'\n                description = 'Please, sign in using your administrator credentials.' />\n\n            <div style = {{ width: '90%', maxWidth: '500px', margin: '4em auto' }}>\n                <Form\n                    data = {[\n                        { name: 'email', placeholder: 'Your email', type: 'email', required: true },\n                        { name: 'password', placeholder: 'Your password', type: 'password', required: true }\n                    ]}\n                    button = 'Sign in' centered\n                    onSubmit = { onLoginHandler }\n                    response = { error }\n                    loading = { loading } />\n                </div>\n        </React.Fragment>\n    );\n}\n\nexport default Auth;\n","// extracted by mini-css-extract-plugin\nexport var Description = \"Preview-module--Description--64b39\";\nexport var Info = \"Preview-module--Info--997be\";\nexport var Message = \"Preview-module--Message--32f67\";\nexport var Meta = \"Preview-module--Meta--b9668\";\nexport var Preview = \"Preview-module--Preview--998db\";\nexport var Text = \"Preview-module--Text--e08e6\";\nexport var Total = \"Preview-module--Total--cc743\";","import React from 'react';\n\nimport * as classes from './Preview.module.scss';\n\nconst correctDate = (value) => {\n\tlet [date, time] = value.split(' ');\n\n\tlet [day, month, year] = date.split('/');\n\n\tdate = `${year}/${month}/${day}`;\n\n\treturn date + ' ' + time;\n};\n\nconst Preview = ({ messages, expand }) => {\n\tif (messages == null) return null;\n\n\treturn (\n\t\t<section className={classes.Preview}>\n\t\t\t<div className={classes.Meta}>\n\t\t\t\t<h3 className={classes.Description}>Name</h3>\n\t\t\t\t<h3 className={classes.Description}>Contact</h3>\n\t\t\t\t<h3 className={classes.Description}>Message</h3>\n\t\t\t\t<h3 className={classes.Description}>Date</h3>\n\t\t\t</div>\n\n\t\t\t{Object.keys(messages)\n\t\t\t\t.reverse()\n\t\t\t\t.map((message, index) => {\n\t\t\t\t\tlet name = messages[message].name;\n\t\t\t\t\tlet contact = messages[message].email;\n\t\t\t\t\tlet text = messages[message].message.substring(0, 35);\n\t\t\t\t\tlet date = correctDate(messages[message].time);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className={classes.Message} onClick={() => expand(message)} key={index}>\n\t\t\t\t\t\t\t<div className={classes.Info}>\n\t\t\t\t\t\t\t\t<p className={classes.Text}>{name}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.Info}>\n\t\t\t\t\t\t\t\t<p className={classes.Text}>{contact}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.Info}>\n\t\t\t\t\t\t\t\t<p className={classes.Text}>{text}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.Info}>\n\t\t\t\t\t\t\t\t<p className={classes.Text}>\n\t\t\t\t\t\t\t\t\t{new Date(date).toLocaleString('en-UK', { dateStyle: 'long', timeStyle: 'short' })}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\n\t\t\t<p className={classes.Total}>Total messages: {Object.keys(messages).length}</p>\n\t\t</section>\n\t);\n};\n\nexport default Preview;\n","// extracted by mini-css-extract-plugin\nexport var Action = \"Message-module--Action--06140\";\nexport var Button = \"Message-module--Button--82665\";\nexport var Description = \"Message-module--Description--48ee3\";\nexport var Message = \"Message-module--Message--07841\";\nexport var Name = \"Message-module--Name--01793\";\nexport var Response = \"Message-module--Response--17ba1\";\nexport var Row = \"Message-module--Row--5a66c\";\nexport var Text = \"Message-module--Text--8591b\";","import React from 'react';\n\nimport * as classes from './Message.module.scss';\n\nconst correctDate = (value) => {\n\tlet [date, time] = value.split(' ');\n\n\tlet [day, month, year] = date.split('/');\n\n\tdate = `${year}/${month}/${day}`;\n\n\treturn date + ' ' + time;\n};\n\nconst Message = ({ message, back, remove }) => {\n\tlet name = message.name;\n\tlet email = message.email;\n\tlet phone = message.phone;\n\tlet text = message.message;\n\tlet date = correctDate(message.time);\n\n\treturn (\n\t\t<section className={classes.Message}>\n\t\t\t<div className={classes.Row}>\n\t\t\t\t<div className={classes.Description}>\n\t\t\t\t\t<p className={classes.Name}>\n\t\t\t\t\t\tName: <span className={classes.Text}>{name}</span>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={classes.Description}>\n\t\t\t\t\t<p className={classes.Name}>\n\t\t\t\t\t\tEmail: <span className={classes.Text}>{email}</span>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className={classes.Row}>\n\t\t\t\t{phone && (\n\t\t\t\t\t<div className={classes.Description}>\n\t\t\t\t\t\t<p className={classes.Name}>\n\t\t\t\t\t\t\tPhone: <span className={classes.Text}>{phone}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className={classes.Description}>\n\t\t\t\t\t<p className={classes.Name}>\n\t\t\t\t\t\tDate:{' '}\n\t\t\t\t\t\t<span className={classes.Text}>\n\t\t\t\t\t\t\t{new Date(date).toLocaleString('en-UK', { dateStyle: 'long', timeStyle: 'short' })}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className={classes.Description}>\n\t\t\t\t<p className={classes.Name}>\n\t\t\t\t\tMessage: <span className={classes.Text}>{text}</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<div className={[classes.Row, classes.Action].join(' ')}>\n\t\t\t\t<button className={classes.Button} onClick={back}>\n\t\t\t\t\t{'< back'}\n\t\t\t\t</button>\n\t\t\t\t<button className={classes.Button} onClick={remove}>\n\t\t\t\t\tDelete\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div className={[classes.Row, classes.Response].join(' ')}>\n\t\t\t\t<button\n\t\t\t\t\tclassName={classes.Button}\n\t\t\t\t\tonClick={() => typeof window !== 'undefined' && window.location.assign('mailto:' + email)}>\n\t\t\t\t\tSend email\n\t\t\t\t</button>\n\t\t\t\t{phone && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={classes.Button}\n\t\t\t\t\t\tonClick={() => typeof window !== 'undefined' && window.location.assign('tel:' + phone)}>\n\t\t\t\t\t\tCall on phone\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default Message;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nimport Introduction from '../../Introduction/Introduction';\nimport Preview from './Preview/Preview';\nimport Message from './Message/Message';\nimport Spinner from '../../UI/Spinner/Spinner';\nimport { BACKEND_DOMAIN } from '../../../config/constants';\n\nconst Inbox = () => {\n    const [expandKey, setExpandKey] = useState();\n    const [messages, setMessages] = useState();\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchMessages();\n    }, []);\n\n    const fetchMessages = () => {\n        setLoading(true);\n\n        let url = BACKEND_DOMAIN + 'admin/ashkaesthetics/messages';\n        let token = localStorage.getItem('token');\n        \n        axios.get(url, { headers: { Authorization: 'Bearer ' + token } })\n          .then(response => {\n            setMessages(response.data.messages);\n            setLoading(false);\n          })\n          .catch(error => {\n            console.log(error.response);\n            setLoading(false);\n          })\n    }\n    \n    const expandCollapseHandler = (key) => {\n        setExpandKey(key);\n    }\n\n    const removeKeyHandler = (key) => {\n      setLoading(true);\n      \n      let url = BACKEND_DOMAIN + 'admin/ashkaesthetics/messages/';\n      let token = localStorage.getItem('token');\n        \n      axios.delete(url + key, { headers: { Authorization: 'Bearer ' + token } })\n        .then(response => {\n          setExpandKey(null);\n          fetchMessages();\n        })\n        .catch(error => {\n          console.log(error.response);\n          setLoading(false);\n        })\n    }\n\n    return (\n    \t<React.Fragment>\n        { \n          loading ? <div style = {{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}><Spinner /></div> : \n            !expandKey\n            ? <React.Fragment>\n                <Introduction\n                  main = { messages == null ? 'No new messages!' : 'Incoming messages' } />                \n                <Preview \n                  messages = { messages } \n                  expand = { expandCollapseHandler } />\n              </React.Fragment>\n            : <React.Fragment>\n                <Introduction\n                  main = 'Incoming messages' />\n                <Message \n                  message = { messages[expandKey] } \n                  back = { () => expandCollapseHandler(null) } \n                  remove = { () => removeKeyHandler(expandKey) } />\n              </React.Fragment>\n        }\n      </React.Fragment>\n    );\n}\n\nexport default Inbox;\n","import React, { useState, useEffect } from 'react';\n\nimport Layout from '../../hoc/Layout/Layout';\nimport Section from '../../components/Section/Section';\nimport Auth from '../../components/Admin/Auth/Auth';\nimport Inbox from '../../components/Admin/Inbox/Inbox';\nimport Seo from '../../hoc/Seo/Seo';\n\nconst Admin = () => {\n\tconst [loggedIn, setLoggedIn] = useState(false);\n\n\tuseEffect(() => {\n\t\tcheckingLogin();\n\t});\n\n\tfunction checkingLogin() {\n\t\tlet token = localStorage.getItem('token');\n\t\tlet expirationDate = localStorage.getItem('expirationDate');\n\n\t\tif (!token || !expirationDate) {\n\t\t\treturn setLoggedIn(false);\n\t\t}\n\n\t\tif (expirationDate < new Date()) {\n\t\t\treturn setLoggedIn(false);\n\t\t}\n\n\t\tif (!loggedIn) {\n\t\t\treturn setLoggedIn(true);\n\t\t}\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t<Section>\n\t\t\t\t<div style={{ minHeight: '70vh' }}>{loggedIn ? <Inbox /> : <Auth login={checkingLogin} />}</div>\n\t\t\t</Section>\n\t\t</Layout>\n\t);\n};\n\nexport default Admin;\n\nexport const Head = () => <Seo title='Admin' />;\n"],"names":["login","loading","setLoading","useState","error","setError","Introduction","main","description","style","width","maxWidth","margin","Form","data","name","placeholder","type","required","button","centered","onSubmit","values","url","BACKEND_DOMAIN","credentials","axios","post","then","response","localStorage","setItem","token","expirationDate","catch","err","errorMessage","message","Description","Info","Text","messages","expand","className","classes","Object","keys","reverse","map","index","contact","email","text","substring","date","value","time","split","day","month","year","correctDate","onClick","key","Date","toLocaleString","dateStyle","timeStyle","length","Action","Button","Name","Response","Row","back","remove","phone","join","window","location","assign","expandKey","setExpandKey","setMessages","useEffect","fetchMessages","getItem","get","headers","Authorization","console","log","expandCollapseHandler","display","justifyContent","alignItems","Spinner","delete","removeKeyHandler","loggedIn","setLoggedIn","checkingLogin","Layout","Section","minHeight","Head","Seo","title"],"sourceRoot":""}