"use strict";(self.webpackChunkashk_aesthetics=self.webpackChunkashk_aesthetics||[]).push([[355],{604:function(e,t,a){a.r(t),a.d(t,{Head:function(){return Z},default:function(){return D}});var s=a(7294),n=a(6511),l=a(5871),m=a(1257),c=a(3008),r=a(3712),o=a(5239);var i=e=>{let{login:t}=e;const{0:a,1:n}=(0,s.useState)(!1),{0:l,1:i}=(0,s.useState)();return s.createElement(s.Fragment,null,s.createElement(c.Z,{main:"Administrator area",description:"Please, sign in using your administrator credentials."}),s.createElement("div",{style:{width:"90%",maxWidth:"500px",margin:"4em auto"}},s.createElement(r.Z,{data:[{name:"email",placeholder:"Your email",type:"email",required:!0},{name:"password",placeholder:"Your password",type:"password",required:!0}],button:"Sign in",centered:!0,onSubmit:function(e){n(!0);let a=o.mL+"admin/ashkaesthetics",s={credentials:e};m.Z.post(a,s).then((e=>{localStorage.setItem("token",e.data.token),localStorage.setItem("expirationDate",e.data.expirationDate),n(!1),i(null),t()})).catch((e=>{n(!1);let t=e.response.data.message;i(t)}))},response:l,loading:a})))},u="Preview-module--Description--64b39",d="Preview-module--Info--997be",g="Preview-module--Text--e08e6";var E=e=>{let{messages:t,expand:a}=e;return null==t?null:s.createElement("section",{className:"Preview-module--Preview--998db"},s.createElement("div",{className:"Preview-module--Meta--b9668"},s.createElement("h3",{className:u},"Name"),s.createElement("h3",{className:u},"Contact"),s.createElement("h3",{className:u},"Message"),s.createElement("h3",{className:u},"Date")),Object.keys(t).reverse().map(((e,n)=>{let l=t[e].name,m=t[e].email,c=t[e].message.substring(0,35),r=function(e){let[t,a]=e.split(" "),[s,n,l]=t.split("/");return t=l+"/"+n+"/"+s,t+" "+a}(t[e].time);return s.createElement("div",{className:"Preview-module--Message--32f67",onClick:()=>a(e),key:n},s.createElement("div",{className:d},s.createElement("p",{className:g},l)),s.createElement("div",{className:d},s.createElement("p",{className:g},m)),s.createElement("div",{className:d},s.createElement("p",{className:g},c)),s.createElement("div",{className:d},s.createElement("p",{className:g},new Date(r).toLocaleString("en-UK",{dateStyle:"long",timeStyle:"short"}))))})),s.createElement("p",{className:"Preview-module--Total--cc743"},"Total messages: ",Object.keys(t).length))},p="Message-module--Action--06140",N="Message-module--Button--82665",h="Message-module--Description--48ee3",v="Message-module--Name--01793",w="Message-module--Response--17ba1",f="Message-module--Row--5a66c",k="Message-module--Text--8591b";var S=e=>{let{message:t,back:a,remove:n}=e,l=t.name,m=t.email,c=t.phone,r=t.message,o=function(e){let[t,a]=e.split(" "),[s,n,l]=t.split("/");return t=l+"/"+n+"/"+s,t+" "+a}(t.time);return s.createElement("section",{className:"Message-module--Message--07841"},s.createElement("div",{className:f},s.createElement("div",{className:h},s.createElement("p",{className:v},"Name: ",s.createElement("span",{className:k},l))),s.createElement("div",{className:h},s.createElement("p",{className:v},"Email: ",s.createElement("span",{className:k},m)))),s.createElement("div",{className:f},c&&s.createElement("div",{className:h},s.createElement("p",{className:v},"Phone: ",s.createElement("span",{className:k},c))),s.createElement("div",{className:h},s.createElement("p",{className:v},"Date:"," ",s.createElement("span",{className:k},new Date(o).toLocaleString("en-UK",{dateStyle:"long",timeStyle:"short"}))))),s.createElement("div",{className:h},s.createElement("p",{className:v},"Message: ",s.createElement("span",{className:k},r))),s.createElement("div",{className:[f,p].join(" ")},s.createElement("button",{className:N,onClick:a},"< back"),s.createElement("button",{className:N,onClick:n},"Delete")),s.createElement("div",{className:[f,w].join(" ")},s.createElement("button",{className:N,onClick:()=>"undefined"!=typeof window&&window.location.assign("mailto:"+m)},"Send email"),c&&s.createElement("button",{className:N,onClick:()=>"undefined"!=typeof window&&window.location.assign("tel:"+c)},"Call on phone")))},b=a(2968);var y=()=>{const{0:e,1:t}=(0,s.useState)(),{0:a,1:n}=(0,s.useState)(),{0:l,1:r}=(0,s.useState)(!0);function i(){r(!0);let e=o.mL+"admin/ashkaesthetics/messages",t=localStorage.getItem("token");m.Z.get(e,{headers:{Authorization:"Bearer "+t}}).then((e=>{n(e.data.messages),r(!1)})).catch((e=>{console.log(e.response),r(!1)}))}function u(e){t(e)}return(0,s.useEffect)((()=>{i()}),[]),s.createElement(s.Fragment,null,l?s.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.createElement(b.Z,null)):e?s.createElement(s.Fragment,null,s.createElement(c.Z,{main:"Incoming messages"}),s.createElement(S,{message:a[e],back:()=>u(null),remove:()=>function(e){r(!0);let a=o.mL+"admin/ashkaesthetics/messages/",s=localStorage.getItem("token");m.Z.delete(a+e,{headers:{Authorization:"Bearer "+s}}).then((e=>{t(null),i()})).catch((e=>{console.log(e.response),r(!1)}))}(e)})):s.createElement(s.Fragment,null,s.createElement(c.Z,{main:null==a?"No new messages!":"Incoming messages"}),s.createElement(E,{messages:a,expand:u})))},M=a(5053);var D=()=>{const{0:e,1:t}=(0,s.useState)(!1);function a(){let a=localStorage.getItem("token"),s=localStorage.getItem("expirationDate");return a&&s?s<new Date?t(!1):e?void 0:t(!0):t(!1)}return(0,s.useEffect)((()=>{a()})),s.createElement(n.Z,null,s.createElement(l.Z,null,s.createElement("div",{style:{minHeight:"70vh"}},e?s.createElement(y,null):s.createElement(i,{login:a}))))};const Z=()=>s.createElement(M.Z,{title:"Admin"})}}]);
//# sourceMappingURL=component---src-pages-admin-index-js-929a207e7c61bc35b451.js.map